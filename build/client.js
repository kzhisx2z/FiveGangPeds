var d=(t,e,o)=>{let n=Math.cos(o),a=Math.sin(o),r=e[0]-t[0],i=e[1]-t[1],s=r*n-i*a,u=r*a+i*n;return[s+t[0],u+t[1]]},y=class{constructor(e,o){if(this.points=e,this.minZ=o?.minZ,this.maxZ=o?.maxZ,this.maxZ<this.minZ){let a=this.minZ;this.minZ=this.maxZ,this.maxZ=a}let n=e[this.points.length-1];(e[0][0]!==n[0]||e[0][1]!==n[1])&&this.points.push(e[0])}isPointInside(e){if(this.minZ&&e[2]<this.minZ||this.maxZ&&e[2]>this.maxZ)return!1;let o=this.points.length,n=0,a=e[0],r=e[1];for(let i=0;i<o-1;i++){let s={a:{x:this.points[i][0],y:this.points[i][1]},b:{x:this.points[i+1][0],y:this.points[i+1][1]}},u=s.a.x,c=s.a.y,m=s.b.x,p=s.b.y;c>r!=p>r&&a<(m-u)*(r-c)/(p-c)+u&&n++}return n%2!==0}},x=class extends y{constructor(e,o,n,a){let r=[],s=(a?.heading??0)*Math.PI/180;r.push(d(e,[e[0]-n/2,e[1]-o/2],s)),r.push(d(e,[e[0]-n/2,e[1]+o/2],s)),r.push(d(e,[e[0]+n/2,e[1]+o/2],s)),r.push(d(e,[e[0]+n/2,e[1]-o/2],s)),r.push(d(e,[e[0]-n/2,e[1]-o/2],s)),super(r,a)}};var b=t=>new Promise(e=>setTimeout(e,t));var h=t=>new Promise(async e=>{for(RequestModel(t);!HasModelLoaded(t);)await b(100);e()});var l=[];addEventListener("onResourceStop",t=>{if(GetCurrentResourceName()===t)for(let e of l)DeletePed(e)},!0);var P=async(t,e)=>{let o=PlayerPedId(),n=e?.coords;if(!n){let[p,V,Z]=GetEntityCoords(o,!0);n=[p,V,Z,GetEntityHeading(o)]}await h(t);let[a,r,i,s]=n,[u,c]=GetGroundZFor_3dCoord(a,r,i,!0),m=CreatePed(0,t,a,r,c,s,!0,!0);for(SetModelAsNoLongerNeeded(t),l.push(m);!DoesEntityExist(m);)await b(50);return SetBlockingOfNonTemporaryEvents(m,!0),SetEntityInvincible(m,!0),FreezeEntityPosition(m,!0),e?.scenario&&TaskStartScenarioInPlace(m,e.scenario,0,!0),m},f=async(t,e)=>{let o=PlayerPedId(),[n,a,r,i]=t;TaskGoStraightToCoord(o,n,a,r,1,e,i,.1);let s=new x(t,1,1),u=500;for(let c=0;c<e-u&&!(s.isPointInside(GetEntityCoords(o,!0))&&Math.abs(GetEntityHeading(o)-i)<5);c+=u)await b(u);await b(u)};exports("spawnPed",P);exports("walkToCoords",f);
